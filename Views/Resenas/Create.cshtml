@model MesaListo.Models.Resena

@{
    ViewData["Title"] = "Crear Reseña";
}

<h1 class="mb-4">
    <i class="fas fa-star text-warning me-2"></i> Crear Reseña
</h1>

<div class="card shadow p-4">
    <form asp-action="Create">
        <div class="mb-3">
            <label asp-for="ReservaId" class="form-label">Reserva</label>
            <select asp-for="ReservaId" asp-items="ViewBag.ReservaId" class="form-select"></select>
        </div>

        <div class="mb-3">
            <label class="form-label">Puntuación</label>
            <div id="starRating" class="mb-2">
                @for (int i = 1; i <= 5; i++)
                {
                    <i class="far fa-star fa-2x text-warning star" data-value="@i" style="cursor:pointer;"></i>
                }
            </div>
            <input asp-for="Puntuacion" type="hidden" id="Puntuacion" />
            <span asp-validation-for="Puntuacion" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="Comentario" class="form-label">Comentario</label>
            <textarea asp-for="Comentario" class="form-control" rows="3"></textarea>
        </div>

        <button type="submit" class="btn btn-warning">
            <i class="fas fa-save me-2"></i>Guardar
        </button>
        <a asp-action="Index" class="btn btn-secondary ms-2">
            <i class="fas fa-arrow-left me-2"></i>Volver
        </a>
    </form>
</div>

@section Scripts {
    <script>
        document.querySelectorAll('.star').forEach(star => {
            star.addEventListener('click', function () {
                const value = this.getAttribute('data-value');
                document.getElementById('Puntuacion').value = value;

                document.querySelectorAll('.star').forEach(s => {
                    s.classList.remove('fas');
                    s.classList.add('far');
                });

                for (let i = 1; i <= value; i++) {
                    document.querySelector(`.star[data-value="${i}"]`).classList.remove('far');
                    document.querySelector(`.star[data-value="${i}"]`).classList.add('fas');
                }
            });
        });
    </script>
}
